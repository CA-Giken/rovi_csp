# rovi_csp
CrankShaft picking

# Release note

## 23.03.03

|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|UR障害後、通信が中断|r_joint|URバージョン11の問題。非公式の通信ライブラリを利用していた|URバージョン13にアップデート。r_joint⇒r_client_urに更新|


## 23.03.13

|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|バケット中央部のワークが選ばれ過ぎる|prepro3|V面位置がカメラ直下のため|V面をカメラ直下から自動的に左右に移動して探索するように変更|
|2|選ばれて欲しいワークが選ばれない|prepro3|採取された点数が足りない。点群の切り出し範囲が妥当でない。|軸端位置の計測値をレポートに表示|
|3|PC起動し最初にキャリブを行うとエラーが起きる|r_socket|レポート値にNul文字が送られる|Nul文字は0に置換|
|4|バケット位置出しの座標が返されない|prepro3|点分布チェックモードが1(ワーク探索)になっていた|レシピ(モード=2)修正|
|5|現在のペイロード値(EIPレジスタ)が1/10の値になっている|r_client_ur|ゲイン1になっていた|ゲイン10に修正|

## 23.03.20-21

|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|撮影処理途中でリターンされる|prepro3|点群クリアとキャプチャのインタバルが短いとき、クリア終了にてキャプチャ終了したように見えてしまう|各々の処理の開始と終了を独立に変更|
|2|選ばれて欲しいワークが選ばれない|prepro3|塊の点数が足りない。|塊の点数を▲本数にて表示(▲３本以上が候補)|
|3|近接したワークの下側が選択される|prepro3|候補周辺の点群を切り出したとき、候補に近接した別のワークも含まれてしまう|レシピ(候補クロップを小さく)修正|
|4|上の方のワークが候補に上がらない|prepro3|台車の取手を軸端と認識するため、ワークの切り出し範囲が少なくなっていた|バケット外側をクロップして取手を除外|
|5|シャフトのピン部をF端と誤認する|prepro3|現行のアルゴリズムは点の塊をワーク候補と見なすため|レシピ(内側クロップを小さく)修正|
|6|荷量が少ないとき無駄な動作がおきる|prepro3|-|荷量推定機能を追加(レポートの荷量に表示)

## 23.03.26

|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|コンベアのレポートが出ない|picker|傾斜、回転の基準がバケット位置となっている|点群チェック無効(モード0)では通常通りマスターとの変化分を表示|


## 23.04.10
|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|ピン部をシャフトと誤認する|prepro3|点群の塊の探索では限界がありそう|軸凸部検出を導入⇒preoro4|
|2|荷量が少ないとき無駄な動作が起きる|prepro4|荷量に依らず開始高さは同じ|モード2のcaptureに荷量計測を追加|

## 24.04.30
|#|issue|module|cause|solution|
|:---|:---|:---|:---|:---|
|1|C撮影時の再撮影が多い|prepro4|C撮影時|視野中央の候補のみで判断|
|2|荷量が少ないとき無駄な動作が起きる|prepro4|荷量に依らず開始高さは同じ|モード2のcaptureに荷量計測を追加|


